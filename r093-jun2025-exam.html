<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>iMedia Genius ¬∑ Markable Full Exam (Firebase) ¬∑ R093/01 June 2025</title><meta content="R093 ¬∑ 01 ‚Äì Traditional Media revision page for OCR Creative iMedia R093 with clear notes, examples and practice questions." name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Existing site styles -->
<link href="host.css" rel="stylesheet"/>
<!-- Extra topic-page styles -->
<link href="topic.css" rel="stylesheet"/>
<link href="nav.css" rel="stylesheet"/>
<link href="favicon.ico" rel="icon" type="image/x-icon"/><link href="https://imediagenius.co.uk/topic-01-traditional-media.html" rel="canonical"/>
<style>
  /* Inline infographic styles ‚Äì shared across topics */
  .infographic-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    align-items: stretch;
    margin-top: 1.5rem;
  }
  .infographic-card {
    flex: 1 1 320px;
    background: #004556;
    border-radius: 18px;
    padding: 1.75rem 2rem;
    color: #fdf5e6;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
  }
  .infographic-card h3 {
    margin-top: 0;
    margin-bottom: 0.75rem;
    font-size: 1.5rem;
  }
  .infographic-tagline {
    font-size: 0.95rem;
    opacity: 0.85;
    margin-bottom: 1rem;
  }
  .infographic-list {
    list-style: none;
    padding-left: 0;
    margin: 0;
  }
  .infographic-list li {
    position: relative;
    padding-left: 1.6rem;
    margin-bottom: 0.6rem;
    line-height: 1.4;
  }
  .infographic-list li::before {
    content: "‚Ä¢";
    position: absolute;
    left: 0;
    top: 0;
    color: #f4b163;
    font-size: 1.4rem;
    line-height: 1;
  }
  .infographic-pill {
    display: inline-block;
    margin-top: 0.5rem;
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    background: rgba(244, 177, 99, 0.18);
    font-size: 0.85rem;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .infographic-header {
    display: flex;
    align-items: flex-start;
    gap: 0.9rem;
    margin-bottom: 0.75rem;
  }
  .infographic-icon {
    flex: 0 0 40px;
  }
  .infographic-icon svg {
    display: block;
    width: 40px;
    height: 40px;
  }
  .infographic-card h3 {
    margin-top: 0;
    margin-bottom: 0.25rem;
    font-size: 1.5rem;
  }

</style>
<link href="markable-mini-exam.css" rel="stylesheet"/>
</head>
<body>
<div class="page">
<header class="topic-header">
<!-- Global site navigation -->
<nav aria-label="Main navigation" class="site-nav">
<div class="site-nav-inner">
<a class="site-nav-brand" href="index.html">
<img alt="iMedia Genius logo" class="site-nav-logo-img" src="imedia_genius_logo_transparent.png"/>
<span class="site-nav-title">
            iMedia Genius
            <span class="site-nav-subtitle">R093 Revision Arcade</span>
</span>
</a>
<div class="site-nav-topic-jump">
<label class="topic-jump-label" for="topicJump">Jump to topic</label>
<select aria-label="Jump directly to a topic page" class="topic-jump-select" id="topicJump">
<option value="">Select a topic‚Ä¶</option>
<option value="topic-01-traditional-media.html">01 ‚Äì Traditional Media</option>
<option value="topic-02-new-media.html">02 ‚Äì New Media</option>
<option value="topic-03-video-audio-music.html">03 ‚Äì Video, Audio &amp; Music</option>
<option value="topic-04-animation-sfx-vfx.html">04 ‚Äì Animation, SFX &amp; VFX</option>
<option value="topic-05-social-media.html">05 ‚Äì Social Media</option>
<option value="topic-06-website-assets.html">06 ‚Äì Website Assets</option>
<option value="topic-07-creative-job-roles.html">07 ‚Äì Creative Job Roles</option>
<option value="topic-08-technical-job-roles.html">08 ‚Äì Technical Job Roles</option>
<option value="topic-09-senior-job-roles.html">09 ‚Äì Senior Job Roles</option>
<option value="topic-10-purpose-of-media-products.html">10 ‚Äì Purpose of Media Products</option>
<option value="topic-11-client-requirements.html">11 ‚Äì Client Requirements</option>
<option value="topic-12-client-brief-formats.html">12 ‚Äì Client Brief Formats</option>
<option value="topic-13-audience-segmentation.html">13 ‚Äì Audience Segmentation</option>
<option value="topic-14-audience-research.html">14 ‚Äì Audience Research</option>
<option value="topic-15-primary-research.html">15 ‚Äì Primary Research</option>
<option value="topic-16-secondary-research.html">16 ‚Äì Secondary Research</option>
<option value="topic-17-understanding-media-codes.html">17 ‚Äì Understanding Media Codes</option>
<option value="topic-18-camera-and-lighting.html">18 ‚Äì Camera and Lighting</option>
<option value="topic-19-mise-en-scene-audio-animation.html">19 ‚Äì Mise en Scene, Audio and Animation</option>
<option value="topic-20-movement-transitions-interactivity.html">20 ‚Äì Movement, Transitions &amp; Interactivity</option>
<option value="topic-21-colour-graphics-typography.html">21 ‚Äì Colour, Graphics &amp; Typography</option>
<option value="topic-22-components-of-work-plans.html">22 ‚Äì Components of Work Plans</option>
<option value="topic-23-mind-maps-mood-boards.html">23 ‚Äì Mind Maps &amp; Mood Boards</option>
<option value="topic-24-asset-logs-flow-charts-scripts.html">24 ‚Äì Asset Logs, Flow Charts &amp; Scripts</option>
<option value="topic-25-storyboards-visualisations-wireframes.html">25 ‚Äì Storyboards, Visualisations &amp; Wireframes</option>
<option value="topic-26-legal-considerations-protect-individuals.html">26 ‚Äì Legal Considerations to Protect Individuals</option>
<option value="topic-27-intellectual-property-rights.html">27 ‚Äì Intellectual Property Rights</option>
<option value="topic-28-regulation-certification-classification.html">28 ‚Äì Regulation, Certification &amp; Classification</option>
<option value="topic-29-health-and-safety.html">29 ‚Äì Health &amp; Safety</option>
<option value="topic-30-distribution-platforms-media.html">30 ‚Äì Distribution Platforms &amp; Media</option>
<option value="topic-31-file-compression.html">31 ‚Äì File Compression</option>
<option value="topic-32-image-files.html">32 ‚Äì Image Files</option>
<option value="topic-33-audio-files.html">33 ‚Äì Audio Files</option>
<option value="topic-34-moving-image-files.html">34 ‚Äì Moving Image Files</option>
<option value="topic-35-hardware-and-software.html">35 ‚Äì Hardware &amp; Software</option>
</select>
</div>
</div>
</nav>
<script>
      (function() {
        var jump = document.getElementById('topicJump');
        if (jump) {
          jump.addEventListener('change', function() {
            if (this.value) {
              window.location.href = this.value;
            }
          });
        }
      })();
    </script>
<div class="brand">
<div class="brand-text">
<h1>
<span>R093/01 ¬∑ June 2025</span>
<span class="highlight">Full Exam</span>
</h1>
<p>Markable mini‚Äëexam: student answers can be submitted to Firebase for later marking.</p>
<div class="exam-pill">Markable Full Exam ¬∑ Paper 1</div>
</div>
</div>
<a class="back-link" href="index.html">‚Üê Back to iMedia Genius ‚Äì R093 Revision Arcade</a>
</header>
<main>

      <section class="mini-exam-controls">
        <div class="controls">
          <span class="pill"><strong>Paper:</strong> <span id="paperId">R093/01 June 2025</span></span>
          <span class="pill"><strong>Total:</strong> <span id="totalMarks">0</span>/70</span>
          <span class="pill"><strong>Timer:</strong> <span id="timer">90:00</span></span>

          <button class="random-btn" id="startBtn" type="button"><span class="icon">‚è±Ô∏è</span>Start</button>
          <button class="filter-btn" id="pauseBtn" type="button">Pause</button>
          <button class="filter-btn" id="saveBtn" type="button">Save</button>
          <button class="filter-btn" id="loadBtn" type="button">Load</button>
          <button class="filter-btn" id="resetBtn" type="button">Reset</button>
        </div>
      </section>


      <section class="submit-card" aria-label="Submit answers for marking">
        <div class="submit-row">
          <label class="submit-field">
            <span>Student name</span>
            <input id="studentName" type="text" placeholder="e.g. Jack D" autocomplete="name"/>
          </label>
          <label class="submit-field">
            <span>Class</span>
            <input id="classCode" type="text" placeholder="e.g. 10OP3" autocomplete="off"/>
          </label>
</div>
</section>

      <div class="grid-header">
        <h2>Answer all questions</h2>
        <small class="hint">When finished, click <strong>Submit for marking</strong>.</small>
      </div>

      <div id="examLoadError" class="exam-load-error" style="margin:10px 0; color:#ff6b6b; font-weight:600;"></div>
      <section id="questions" class="exam-stack"></section>
      <section class="submit-card submit-card-bottom" aria-label="Submit answers for marking (bottom)">
        <div class="submit-row" style="justify-content:flex-end">
          <button class="random-btn" id="submitAttemptBtn" type="button"><span class="icon">üì§</span>Submit for marking</button>
        </div>
        <div id="submitStatus" class="copy-status" aria-live="polite"></div>
        <div id="submitStatusBottom" class="copy-status" aria-live="polite" style="display:none"></div>
      </section>
<section class="prompt-card teacher-only">
        <div class="prompt-header">
          <div>
            <h3 class="prompt-title">AI Marking Prompt</h3>
            <p class="hint">This compiles questions + mark schemes + your answers into one examiner-style prompt.</p>
          </div>
          <div class="prompt-actions">
            <button class="random-btn" id="buildPromptBtn" type="button"><span class="icon">üß†</span>Build & Copy AI Marking Prompt</button>
            <button class="filter-btn" id="copyPromptBtn" type="button">Copy</button>
          </div>
        </div>

        <div class="ai-links">
          <span class="ai-links-label">Open an AI tool:</span>
          <button type="button" class="btn-link" onclick="openAIAndCopy('https://chat.openai.com/')">ChatGPT</button>
          <button type="button" class="btn-link" onclick="openAIAndCopy('https://gemini.google.com/')">Gemini</button>
          <button type="button" class="btn-link" onclick="openAIAndCopy('https://claude.ai/')">Claude</button>
          <button type="button" class="btn-link" onclick="openAIAndCopy('https://copilot.microsoft.com/')">Copilot</button>
          <button type="button" class="btn-link" id="copyAnswersBtn">Copy answers only</button>
        </div>
        <div id="copyStatus" class="copy-status" aria-live="polite"></div>
        <div id="l2l3Tips" class="hint" style="margin:8px 0 10px 0;"></div>

        <textarea id="promptBox" class="prompt-box" placeholder="Your AI marking prompt will appear here after you click Build & Copy AI Marking Prompt‚Ä¶" spellcheck="false"></textarea>
      </section>
    </main>
<footer>
<p>¬© <span id="year"></span> iMedia Genius ¬∑ R093 Revision Arcade</p>
<p class="footer-note">This is an independent teacher-created resource for OCR Cambridge National in Creative iMedia (R093). It is not affiliated with, endorsed by or approved by OCR.</p>
</footer>
</div>
<script src="host.js"></script>

<script type="module">
  const EXAM_ID = "R093-2025-JUN";
  const SPEC_URL = "/r093-2025-jun-questions.json";
  const LS_KEY = `${EXAM_ID}::answers_v1`;

  let SPEC = { questions: [], assets: [] };
  let ANSWERS = {};

  const $ = (id) => document.getElementById(id);

  function showError(msg){
    const box = $("examLoadError");
    if (!box) { console.error(msg); return; }
    box.style.display = "block";
    box.textContent = msg;
  }
  function clearError(){
    const box = $("examLoadError");
    if (box){ box.style.display = "none"; box.textContent = ""; }
  }

  function normaliseSpec(raw){
    if (raw && Array.isArray(raw.questions)) return raw;
    if (Array.isArray(raw)) return { questions: raw, assets: [] };
    return { questions: [], assets: [] };
  }

  function loadSaved(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      if (!raw) return;
      const parsed = JSON.parse(raw);
      if (parsed && typeof parsed === "object") ANSWERS = parsed;
    }catch(e){}
  }
  function saveSaved(){
    try{ localStorage.setItem(LS_KEY, JSON.stringify(ANSWERS)); }catch(e){}
  }
  function setAns(qid, val){ ANSWERS[qid] = val; saveSaved(); }
  function getAns(qid, defVal){ return (qid in ANSWERS) ? ANSWERS[qid] : defVal; }

  function assetById(id){
    return (SPEC.assets || []).find(a => a.id === id);
  }

  function renderQuestion(q){
    const card = document.createElement("div");
    card.className = "question-card";

    const header = document.createElement("div");
    header.className = "question-header";
    const qLabel = q.part ? `Q${q.qnum}${q.part}` : `Q${q.qnum}`;
    header.innerHTML = `
      <div class="question-meta">
        <div class="question-number">${qLabel}</div>
        <div class="question-marks">[${q.marks}]</div>
      </div>
      <div class="command-word">${q.command_word || ""}</div>
    `;
    card.appendChild(header);

    const prompt = document.createElement("div");
    prompt.className = "question-text";
    prompt.textContent = q.prompt || "";
    card.appendChild(prompt);

    (q.assets || []).forEach(aid => {
      const a = assetById(aid);
      if (!a || a.type !== "image") return;
      const wrap = document.createElement("div");
      wrap.className = "question-asset";
      const img = document.createElement("img");
      img.src = a.src;
      img.alt = a.alt || "";
      img.loading = "lazy";
      img.style.maxWidth = "100%";
      img.style.borderRadius = "12px";
      wrap.appendChild(img);
      card.appendChild(wrap);
    });

    const aw = document.createElement("div");
    aw.className = "answer-wrap";

    let control;
    switch(q.response_type){
      case "short_text":{
        control = document.createElement("input");
        control.type = "text";
        control.className = "answer-input";
        control.value = getAns(q.id, "") || "";
        control.addEventListener("input", ()=> setAns(q.id, control.value));
        break;
      }
      case "mcq_single":{
        control = document.createElement("div");
        control.className = "mcq-wrap";
        const saved = getAns(q.id, "");
        (q.options || []).forEach(opt => {
          const label = document.createElement("label");
          label.className = "mcq-option";
          const r = document.createElement("input");
          r.type = "radio";
          r.name = `mcq_${q.id}`;
          r.value = opt.key;
          r.checked = saved === opt.key;
          r.addEventListener("change", ()=> setAns(q.id, opt.key));
          const span = document.createElement("span");
          span.textContent = `${opt.key}. ${opt.text}`;
          label.appendChild(r);
          label.appendChild(span);
          control.appendChild(label);
        });
        break;
      }
      case "two_blanks":{
        control = document.createElement("div");
        control.className = "two-blanks";
        const saved = getAns(q.id, {}) || {};
        (q.blanks || []).forEach((b, idx) => {
          const row = document.createElement("div");
          row.className = "blank-row";
          const lab = document.createElement("div");
          lab.className = "blank-label";
          lab.textContent = (b.label || `Blank ${idx+1}`) + ":";
          const inp = document.createElement("input");
          inp.type = "text";
          inp.className = "answer-input";
          inp.value = saved[b.label] || "";
          inp.addEventListener("input", ()=> {
            const next = { ...(getAns(q.id, {}) || {}) };
            next[b.label] = inp.value;
            setAns(q.id, next);
          });
          row.appendChild(lab);
          row.appendChild(inp);
          control.appendChild(row);
        });
        break;
      }
      case "short_list":{
        control = document.createElement("div");
        control.className = "short-list";
        const count = q.expected_count || 2;
        const saved = getAns(q.id, []);
        for (let i=0;i<count;i++){
          const inp = document.createElement("input");
          inp.type = "text";
          inp.className = "answer-input";
          inp.placeholder = `Answer ${i+1}...`;
          inp.value = Array.isArray(saved) ? (saved[i] || "") : "";
          inp.addEventListener("input", ()=> {
            const arr = Array.isArray(getAns(q.id, [])) ? [...getAns(q.id, [])] : [];
            arr[i] = inp.value;
            setAns(q.id, arr);
          });
          control.appendChild(inp);
        }
        break;
      }
      default:{
        control = document.createElement("textarea");
        control.className = "answer-textarea";
        control.rows = 5;
        control.value = getAns(q.id, "") || "";
        control.addEventListener("input", ()=> setAns(q.id, control.value));
      }
    }

    aw.appendChild(control);
    card.appendChild(aw);
    return card;
  }

  function updateTotal(){
    // This full exam is teacher-marked; keep 0/70 until marking desk.
    const totalEl = $("totalMarks");
    if (totalEl) totalEl.textContent = "0";
  }

  function renderAll(){
    const container = $("questions");
    if (!container){
      showError("Missing <section id=\"questions\"> in the HTML.");
      return;
    }
    container.innerHTML = "";
    if (!SPEC.questions || !SPEC.questions.length){
      showError("Loaded spec, but it contains no questions.");
      return;
    }
    clearError();
    SPEC.questions.forEach(q => container.appendChild(renderQuestion(q)));
    updateTotal();

    // push submit to the bottom (after questions)
    const submitBtn = $("submitAttemptBtn");
    if (submitBtn){
      const submitCard = submitBtn.closest(".submit-card") || submitBtn.parentElement;
      if (submitCard && container.parentElement) container.parentElement.appendChild(submitCard);
    }
  }

  async function loadSpec(){
    try{
      const res = await fetch(SPEC_URL, { cache: "no-store" });
      if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
      SPEC = normaliseSpec(await res.json());
    }catch(e){
      SPEC = { questions: [], assets: [] };
      showError(`Failed to load ${SPEC_URL}. Ensure it exists in the repo root. (${e.message})`);
    }
  }

  async function submit(){
    const studentName = ($("studentName")?.value || "").trim();
    const classCode = ($("classCode")?.value || $("className")?.value || $("class")?.value || "").trim();
    if (!studentName || !classCode){
      alert("Please enter Student name and Class.");
      return;
    }

    // Lazy-load Firebase only when submitting (so rendering still works even if Firebase fails)
    let db;
    let addDoc, collection, serverTimestamp;
    try{
      const cfg = await import("./firebaseConfig.js");
      db = cfg.db;
      ({ collection, addDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js"));
    }catch(e){
      console.error(e);
      alert("Firebase failed to load. The paper will still work locally, but cannot submit for marking until firebaseConfig.js is reachable.");
      return;
    }

    const colRef = collection(db, "exams", EXAM_ID, "submissions");
    await addDoc(colRef, {
      examId: EXAM_ID,
      studentName,
      classCode,
      answers: ANSWERS,
      submittedAt: serverTimestamp(),
      specVersion: SPEC.spec_version || SPEC.specVersion || "unknown"
    });
    alert("Submitted ‚úÖ");
  }

  function wire(){
    $("saveBtn")?.addEventListener("click", ()=> { saveSaved(); alert("Saved ‚úÖ"); });
    $("loadBtn")?.addEventListener("click", ()=> { loadSaved(); renderAll(); alert("Loaded ‚úÖ"); });
    $("resetBtn")?.addEventListener("click", ()=> {
      if (confirm("Reset all answers for this paper?")){
        ANSWERS = {};
        saveSaved();
        renderAll();
      }
    });
    $("submitAttemptBtn")?.addEventListener("click", async ()=> {
      try{ await submit(); }catch(e){ console.error(e); alert("Submit failed (check Firestore rules)."); }
    });
  }

  async function init(){
    loadSaved();
    await loadSpec();
    renderAll();
    wire();
  }

  document.addEventListener("DOMContentLoaded", init);
</script>

</body>
</html>